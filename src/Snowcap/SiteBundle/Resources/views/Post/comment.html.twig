{% set comments_count = post.getComments()|length %}
<div class="comments-container">
    <div class="comments-count">
        {{ 'blog.comments.count' | transchoice(comments_count) }}
        <a href="{{ path('snwcp_site_post_comment', {'slug': post.slug }) }}" title="{{ 'blog.comment.post.title' | trans }}" class="post-comment-link">{{ 'blog.comment.post.label' | trans }}</a>
    </div>
    <div class="comments">
        {% if comments_count > 0 %}
            <ul class="comments-list">
                {% for comment in post.getComments() %}
                    <li>
                        <h3>{{ 'blog.comment.title' | trans({'%relative_time%': comment.getPublishedAt()|time_ago, '%name%': comment.getName() })}}</h3>
                        <p>{{ comment.body }}</p>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
        <form action="{{ path('snwcp_site_post_comment', {'slug': post.slug }) }}" method="post" {{ form_enctype(form) }}>
            {{ form_widget(form) }}

            <input type="submit" value="{{ "blog.comment.submit" | trans }}" />
        </form>
    </div>
</div>