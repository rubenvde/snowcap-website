{% extends "SnowcapSiteBundle::base.html.twig" %}
{% set body_class = 'blog blog-listing' %}
{% block body %}
    <h1 class="main-title">{{ "blog.list.title" | trans }}</h1>
    <div class="full">
        <section class="main content">
            <nav>
                <a href="{{ path('snwcp_site_post_list') }}" title="{{ "blog.category.all.title" | trans }}" class="all">{{ "blog.category.all.label" | trans }}</a>
                <a href="{{ path('snwcp_site_post_list', {'category_slug': 'thoughts'}) }}" title="{{ "blog.category.thoughts.title" | trans }}" class="thoughts">{{ "blog.category.thoughts.label" | trans }}</a>
                <a href="{{ path('snwcp_site_post_list', {'category_slug': 'cases'}) }}" title="{{ "blog.category.cases.title" | trans }}" class="cases">{{ "blog.category.cases.label" | trans }}</a>
                <a href="{{ path('snwcp_site_post_list', {'category_slug': 'events'}) }}" title="{{ "blog.category.events.title" | trans }}" class="events">{{ "blog.category.events.label" | trans }}</a>
            </nav>
            {% if posts|length > 0 %}
                <ul>
                    {% for post in posts %}
                        <li>
                            {% if post.thumb %}
                                <img class="thumb" src="{{ post.thumb.webPath | imagine_filter('thumb') }}" alt="{{ post.thumb.alt }}" />
                            {% endif %}
                            <h2>{{ post.title }}</h2>
                            <p class="published">{{ post.published_at | time_ago }}</p>
                            {{ post.summary | markdown }}
                            {% if post.body %}
                                <a href="{{ url('snwcp_site_post_show', { 'slug': post.slug }) }}" title="{{ 'Read more' | trans }}" class="read-more">{{ 'Read more' | trans }}</a>
                            {% endif %}
                            <div class="comments-count">
                                {{ 'blog.comments.count' | transchoice(post.getComments()|length) }}
                                <a href="{{ path('snwcp_site_post_show', {'slug': post.slug }) }}" title="{{ 'blog.comment.post.title' | trans }}" class="post-comment-link">{{ 'blog.comment.post.label' | trans }}</a>
                            </div>

                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>{{ "blog.list.empty" | trans }}</p>
            {% endif %}
        </section>
    </div>
{% endblock body %}